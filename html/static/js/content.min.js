function $childNode(a){return window.frames[a]}function animationHover(b,a){b=$(b),b.hover(function(){b.addClass("animated "+a)},function(){window.setTimeout(function(){b.removeClass("animated "+a)},2000)})}function WinMove(){var c="[class*=col]",b=".ibox-title",a="[class*=col]";$(c).sortable({handle:b,connectWith:a,tolerance:"pointer",forcePlaceholderSize:!0,opacity:0.8}).disableSelection()}var $parentNode=window.parent.document;function formAjaxSubmit(e){if(e==null){tip("需要先指定表单基本信息","错误","error");return false}if(e.baseValidate!=null){var d=$(e.id).validate(e.baseValidate);if(!d.form()){return false}}var b=$(e.id).serializeJSON();if(e.advanceValidate!=null&&typeof(e.advanceValidate)=="function"){var f=e.advanceValidate(b);if(!f){return false}}var c=$(e.id).attr("action");var g=$(e.id).attr("method");var a=$(e.button).attr("onclick");$(e.button).removeAttr("onclick");if(e.loading){$(e.button).ladda();$(e.button).ladda("start")}$.ajax({url:c,type:g||"GET",dataType:"json",data:JSON.stringify(b),contentType:"application/json",success:function(h){$(e.button).attr("onclick",a);if(e.loading){$(e.button).ladda("stop")}if(h.success){tip(h.message,"提示","success");if(typeof(e.callback)=="function"){e.callback(h)}if(e.closeModal&&typeof(closeWindow)=="function"){closeWindow()}}else{tip(h.message,"提示","error")}},error:function(k,h,j){$(e.button).attr("onclick",a);if(e.loading){setTimeout(function(){$(e.button).ladda("stop")},1000)}var i="Error: "+k.status+": "+k.statusText;if(k.status==401){i="登录已过期或权限被去除!"}else{if(k.status==404){i="请求的URL不存在,"+c}}tip(i,"提示","error")}});return false}function retrievePassword(){var a={rules:{userName:{required:true},validateCode:{required:true,minlength:8},newPwd:{required:true},repeatNewPwd:{required:true,equalTo:"#newPwd"}},messages:{userName:{required:"请输入用户名"},validateCode:{required:"请输入验证码",minlength:"至少输入8位哦"},newPwd:{required:"(请输入新密码)"},repeatNewPwd:{required:"(请再次输入新密码)",equalTo:"两次输入的密码不一致"}},};var c=function(d){if(d==null){tip("数据源为空","","error");return false}if(typeof(d)=="string"){d=JSON.parse(d)}if(d.newPwd!==d.repeatNewPwd){tip("两次输入的新密码不一致","","error");return false}return true};var b={id:"#retrieve_pwd_form",loading:true,closeModal:true,callback:function(d){document.location.href="/login"},button:"#retrieve_pwd_submit",baseValidate:a,advanceValidate:c};return formAjaxSubmit(b)}function tip(b,d,a){var e=a||"info";var c=b||"请输入消息内容";var d=d||"提示";toastr.options={closeButton:true,debug:false,progressBar:false,preventDuplicates:false,positionClass:"toast-top-right",onclick:null,showDuration:400,hideDuration:2000,timeOut:2000,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};if("success"==a){toastr.success(c,d)}else{if("info"==a){toastr.info(c,d)}else{if("warning"==a){toastr.warning(c,d)}else{toastr.error(c,d)}}}}function initFormRemoteData(formId){$(formId).find("[data-url]").each(function(){var me=$(this);var url=$(this).data("url");var control=$(this).data("control");var cname=$(this).data("cname");var append=$(this).data("append");var callback=$.trim($(this).data("callback"));var query={};if($(this).data("query")!=null){query=JSON.parse($(this).data("query"))}var defaultValue=$(this).data("val");if(defaultValue==null){defaultValue=""}else{defaultValue=defaultValue+""}$.ajax({url:url,type:"POST",dataType:"json",data:JSON.stringify(query),contentType:"application/json",success:function(res){if(res.success){var html="";if(me[0].tagName=="SELECT"){if(append!=null&&append!=""){var appendArr=append.split("|");html+="<option value='"+appendArr[0]+"'>"+appendArr[1]+"</option>"}$.each(res.data,function(i,v){if(typeof(v.id)!="undefined"){html+="<option value='"+v.id+"'>"+v.name+"</option>"}else{if(typeof(v.key)!="undefined"){html+="<option value='"+v.key+"'>"+v.value+"</option>"}}});me.empty().html(html);if(defaultValue!=""){$(me).val(defaultValue+"")}if($(me).attr("class").indexOf("chosen-select")>=0){$(me).trigger("chosen:updated")}}else{if(control.toUpperCase()=="CHECKBOX"){$.each(res.data,function(i,v){var vv=typeof(v.id)!="undefined"?v.key:v.id;var checked=defaultValue.indexOf(vv)>=0?"checked":"";if(typeof(v.id)!="undefined"){html+="<label><input type='checkbox' name='"+cname+"[]' "+checked+" value='"+v.id+"'> "+v.name+"</label>"}else{if(typeof(v.key)!="undefined"){html+="<label><input type='checkbox' name='"+cname+"[]' "+checked+" value='"+v.key+"'> "+v.value+"</label>"}}});me.empty().html(html)}else{if(control.toUpperCase()=="RADIO"){$.each(res.data,function(i,v){var vv=typeof(v.id)!="undefined"?v.key:v.id;var checked=defaultValue.indexOf(vv)>=0?"checked":"";if(typeof(v.id)!="undefined"){html+="<label><input type='radio' name='"+cname+"' "+checked+" value='"+v.id+"'> "+v.name+"</label>"}else{if(typeof(v.key)!="undefined"){html+="<label><input type='radio' name='"+cname+"' "+checked+" value='"+v.key+"'> "+v.value+"</label>"}}});me.empty().html(html)}}}if(callback!=""){eval(callback)}}else{tip(res.message,"初始化失败","error")}},error:function(xhr,status,err){var loadError="Error: "+xhr.status+": "+xhr.statusText;if(xhr.status==401){loadError="登录已过期或权限被去除!"}else{if(xhr.status==404){loadError="请求的URL不存在!"+url}}tip(loadError,"提示","error")}})})};