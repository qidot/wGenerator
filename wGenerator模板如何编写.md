###  wGenerator如何编写模板
虞城码农





#### 编写模板大致分为4个步骤：

1. 确定开发语言与数据库类型
2. 分析表数据类型与语言的类型对应
3. 分析代码中哪些可以规整为模板
4. 编写与测试模板

我们对照流程图看的话会更加清晰；

![编写模板流程](/Users/wangzh/Downloads/编写模板流程.jpg)

#### 1.如何分析表数据与开发语言的类型对照关系呢

不同的开发语言与不同的数据库类型，其对应关系都是不同的，如下图

可以清晰的看出表的字段类型与动态语言的对应

![数据库与表解析 (1)](/Users/wangzh/Downloads/数据库与表解析 (1).jpg)

wGenerator会将分析出来的结果投放到模板引擎中：

| 序号 | 参数    | 名称                                 | velocity中调用                                       |
| ---- | ------- | ------------------------------------ | ---------------------------------------------------- |
| 1    | table   | 表(对象)                             | $!{table.tableName}                                  |
| 2    | columns | 列(列表)                             | \#foreach($!tc in $!columns)<br>$!tc.dlType<br>\#end |
| 3    | now     | 时间(字符串)格式:yyyy-MM-dd HH:mm:ss | $!{now}                                              |
| 4    | author  | 开发者(字符串)                       | $!{author}                                           |
| 5    | dbName  | 数据库名(字符串)                     | $!{dbName}                                           |



用户可以通过自己的diy把编写模板想成是在：**绘画**，**造句**，**装修房屋**等等

![模板制作](/Users/wangzh/Downloads/模板制作.jpg)



#### 哪些类型的可以整理为模板

- 常用的
- 有固定规律的
- 你已经掌握的



#### 实际应用场景

- 实体类(从SQL-》entity) 
- 持久化层(查询，新增，删除)
- 服务层
- 控制器
- 视图
- 校验规则

#### 通常页面

> 理论再好也还是需要实践，我们结合实际页面来分析，如何写模板

- 查询区域 1         变化多端
- 操作按钮区域   权限模块控制的
- 列表显示区域2  展现基本一致，仅数据变化
- 分页显示区域  框架选好了，就好了，不需要多次变化

![image-20190424201255890](/Users/wangzh/Downloads/image-20190424201255890.png)



具体如何编写。大家可以参考以下这个视频教程

因视频文章是发在微信公众号中的，大家可以前往去观看...

[点击查看](<https://mp.weixin.qq.com/s/6_7Zouf2Erz69fDGHzgKKg>)

<https://mp.weixin.qq.com/s/6_7Zouf2Erz69fDGHzgKKg>



[^wGenerator]: http://wgenerator.51dmai.com







